<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<title></title>
		<script src="js/jquery.min.js" type="text/javascript" charset="utf-8"></script>
		<style type="text/css">
			body{background:#000;}
			*{margin:0;padding:0;list-style:none;}
			#throughWall{
				margin:150px auto;
				width:1200px;overflow:hidden;
			}
			#throughWall li{
				background-size:280px 190px;
				width:280px;height:190px;
				position:relative;
				float:left;margin:0 10px 10px 0;
				overflow:hidden;
			}
			#throughWall li span{
				width:100%;height:100%;
				position:absolute;
				left:-280px;top:0;
				background:#C5E3FD;
			}
		</style>
		<script type="text/javascript">
			function a2d (n) {
				/*
					360度=2Pi弧度
				 	n弧度=n*180/Pi;
				*/
				return n*180/Math.PI;
			}
			function getDir (obj,ev) {
				var x=ev.clientX-obj.offsetLeft-obj.offsetWidth/2;
				var y=obj.offsetTop+obj.offsetHeight/2-ev.clientY;
				
				return Math.round((a2d(Math.atan2(y,x))+180)/90)%4;
			}
			function throughWall (obj) {
				
				obj.onmouseover=function (ev) {
					var oFrom=ev.fromElement||ev.relatedTarget;
					if(obj.contains(oFrom)){
						return;
					}
					
					var oS=this.children[0];
					var n=getDir(this,ev);
					switch (n){
						case 0:
							oS.style.left='-280px';
							oS.style.top='0';
							break;
						case 1:
							oS.style.left='0';
							oS.style.top='280px';
							break;
						case 2:
							oS.style.top='0';
							oS.style.left='280px';
							break;
						case 3:
							oS.style.top='-280px';
							oS.style.left='0';
							break;
					}
					$(oS).stop().animate({left:0,top:0});
				};
				obj.onmouseout=function (ev) {
					var oTo=ev.toElement||ev.relatedTarget;
					if(obj.contains(oTo)){
						return;
					}
					var n=getDir(this,ev);
					var oS=this.children[0];
					
					switch (n){
						case 0:
							$(oS).stop().animate({left:'-280px',top:0});
							break;
						case 1:
							$(oS).stop().animate({left:0,top:'280px'});
							break;
						case 2:
							$(oS).stop().animate({left:'280px',top:0});
							break;
						case 3:
							$(oS).stop().animate({left:0,top:'-280px'});
							break;
					}
				};
			}
			window.onload=function () {
				/*var oLi=document.getElementById("li1");
				oLi.onmouseenter=function (ev) {
					console.log(getDir(oLi,ev));
				};*/
				
				var oThrWall=document.getElementById("throughWall");
				var aLi=oThrWall.children;
				for(var i=0;i<aLi.length;i++){
					throughWall(aLi[i]);
				}
			};
		</script>
	</head>
	<body>
		<ul id="throughWall">
			<li style="background:url(img/works1.jpg);">
				<span></span>
			</li>
			<li style="background:url(img/works3.jpg);">
				<span></span>
			</li>
			<li style="background:url(img/works6.jpg);"><span></span></li>
			<li style="background:url(img/works4.jpg);"><span></span></li>
			<li style="background:url(img/works4.jpg);"><span></span></li>
			<li style="background:url(img/works6.jpg);"><span></span></li>
			<li style="background:url(img/works3.jpg);"><span></span></li>
			<li style="background:url(img/works1.jpg);"><span></span></li>
			
		</ul>
	</body>
</html>
